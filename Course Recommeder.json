{
  "name": "My workflow",
  "nodes": [
    {
      "parameters": {
        "public": true,
        "initialMessages": "Hi! What topics are you interested in learning?",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -816,
        -48
      ],
      "id": "d4869c6d-5608-4128-b932-d9d276cd672e",
      "name": "When chat message received",
      "webhookId": "ff664100-c862-435b-bd8b-2a803660c626"
    },
    {
      "parameters": {
        "options": {
          "systemMessage": "You are a college advisor who helps students choose courses they are eligible to take.\n\nYour goal is to give students a concise list of courses they can take based on their interests and requisites completed. In your list include the course code, course title, and a brief description. Get all your information from the Supabase node.\n\nBe professional and helpful. Use plain English. Keep answers concise. \n\nTools: You should use the following tool to complete your task\n- Supabase node to access course information. There you will find a table that contains the course code, title, description and more. Use it when answering the student's questions.\n\nTask for each user interaction.\nAsk the student what topics they are interested in.\nUse the Supabase node and the user input to find the course codes of courses with a similar 'Description'. Do not present the student with the list. Use the 'Requisite' column of the courses that fit the student's interest, to find the course codes of the prereqs necessary to take each course.\nPresent the the student with a list of the prereqs you found and ask the student which courses they have completed.\nNarrow down the first list of courses using the courses taken to see which courses are open to the student.\nPresent the student with the narrowed down list of courses.\n\nIf the interest or courses taken are not provided, ask for them nicely. If you are unable to answer the question, kindly ask the student for their information again. If you are still unable to help, direct the student to BMCC's catalog.\n\nGuardrails\nDo not give information you are not sure of. Always refer to the Supabase table when answering questions to ensure accuracy, do not access other systems. Do not make assumptions or give personal opinions. "
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        -464,
        -48
      ],
      "id": "9bf2b209-0b22-4b65-98b0-012c592852f5",
      "name": "AI Agent"
    },
    {
      "parameters": {},
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        -368,
        128
      ],
      "id": "8205b4bf-8ebe-4f17-885b-37483c2db84d",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "operation": "getAll",
        "tableId": "Courses"
      },
      "type": "n8n-nodes-base.supabaseTool",
      "typeVersion": 1,
      "position": [
        -96,
        208
      ],
      "id": "a5c34f32-8668-46e4-8853-a8e5b2360e47",
      "name": "Get many rows in Supabase",
      "credentials": {
        "supabaseApi": {
          "id": "AvWKVEen5jRJ9iPB",
          "name": "Supabase account"
        }
      }
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "mode": "list",
          "value": "gpt-4.1-mini"
        },
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -608,
        160
      ],
      "id": "3607b5cf-dd82-409c-ac9a-6212f29a1a4c",
      "name": "OpenAI Chat Model",
      "credentials": {
        "openAiApi": {
          "id": "4AWy6wGhvg3y7WwI",
          "name": "n8n free OpenAI API credits"
        }
      }
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Get many rows in Supabase": {
      "ai_tool": [
        [
          {
            "node": "AI Agent",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "0b304495-a2ab-4433-b739-b492aab2927f",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "f1ec944b98582cfc73741df4fffd205afffd12dc24edb7dc29b6de92663dcf42"
  },
  "id": "jkd09eONEIzYnznk",
  "tags": []
}